{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <h2>Add New Program</h2>

    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}

    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="name">Program Name</label>
            <input type="text" name="name" id="name" class="form-control" placeholder="Eg: Group Song, Skit">
        </div>

        <div class="mb-3">
            <label for="category">Select Category</label>
            <select name="category" id="category" class="form-select">
                <option value="">-- Choose Category --</option>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-success">Add Program</button>
    </form>

    <hr>


    <h4>Existing Programs</h4>

{% regroup programs by category as grouped_programs %}

{% for group in grouped_programs %}
    <h5 class="mt-3">{{ group.grouper.name|upper }}</h5>
    <ul class="list-group">
        {% for program in group.list %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ program.name }}
                <span>
                    <a href="{% url 'edit_program' program.id %}" class="btn btn-sm btn-warning">Edit</a>
                    <a href="{% url 'delete_program' program.id %}" class="btn btn-sm btn-danger"
                       onclick="return confirm('Are you sure to delete this program?')">Delete</a>
                </span>
            </li>
        {% endfor %}
    </ul>
{% empty %}
    <p>No programs added yet.</p>
{% endfor %}


</div>
{% endblock %}

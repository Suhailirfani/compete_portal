{% extends 'base.html' %}
{% block content %}
<form method="get" action="">
    <label>Team</label>
    <select name="team" class="form-select" onchange="this.form.submit()">
        <option value="">-- Select Team --</option>
        {% for team in teams %}
            <option value="{{ team.id }}" {% if request.GET.team == team.id|stringformat:"s" %}selected{% endif %}>
                {{ team.name }}
            </option>
        {% endfor %}
    </select>

    <label>Category</label>
    <select name="category" class="form-select" onchange="this.form.submit()">
        <option value="">-- Select Category --</option>
        {% for cat in categories %}
            <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
                {{ cat.name }}
            </option>
        {% endfor %}
    </select>
</form>

{% if contestants %}
<form method="post">
    {% csrf_token %}

    <label>Contestant</label>
    <select name="contestant" class="form-select">
        {% for contestant in contestants %}
            <option value="{{ contestant.id }}">{{ contestant.name }}</option>
        {% endfor %}
    </select>

    <h5>Programs</h5>
    {% for prog in programs %}
        <div>
            <input type="checkbox" name="programs" value="{{ prog.id }}">
            {{ prog.name }}
        </div>
    {% empty %}
        <p>No programs available.</p>
    {% endfor %}

    <button type="submit" class="btn btn-primary mt-3">Assign</button>
</form>
<a href="{% url 'assigned_programs' %}" class="btn btn-primary mt-3">Assigned Programs</a>
{% endif %}
{% endblock %}